-- Test script to verify Tokyo UI Library loads correctly
print("Starting Tokyo UI Library test...")

-- Test 1: Check if HttpGet works
print("Test 1: Attempting to fetch library...")
local success1, content = pcall(function()
    return game:HttpGet("https://raw.githubusercontent.com/dohmai/Tokyo/main/Libraries/UI")
end)

if not success1 then
    print("ERROR: Failed to fetch library from GitHub")
    print("Error message: " .. tostring(content))
    return
end

if not content or content == "" then
    print("ERROR: Library content is empty or nil")
    return
end

print("SUCCESS: Library fetched, size: " .. #content .. " characters")

-- Test 2: Check if loadstring works
print("\nTest 2: Attempting to compile library...")
local success2, loadFunc = pcall(function()
    return loadstring(content)
end)

if not success2 then
    print("ERROR: Failed to compile library")
    print("Error message: " .. tostring(loadFunc))
    return
end

if not loadFunc then
    print("ERROR: loadstring returned nil (loadstring may be disabled)")
    return
end

print("SUCCESS: Library compiled successfully")

-- Test 3: Try to execute the library
print("\nTest 3: Attempting to execute library...")
local success3, Library = pcall(loadFunc)

if not success3 then
    print("ERROR: Failed to execute library")
    print("Error message: " .. tostring(Library))
    return
end

if not Library then
    print("ERROR: Library executed but returned nil")
    return
end

print("SUCCESS: Library loaded!")
print("Library type: " .. type(Library))

-- Test 4: Check library structure
print("\nTest 4: Checking library structure...")
if type(Library) == "table" then
    print("Available functions/properties:")
    for k, v in pairs(Library) do
        print("  - " .. tostring(k) .. " (" .. type(v) .. ")")
    end
else
    print("ERROR: Library is not a table, it's a " .. type(Library))
end

print("\n=== TEST COMPLETE ===")
